{% extends 'reader/reader_base.html' %}

{% block header %}
  <div class="button_group">
    <a href="{% url 'main:title_page' title.id %}?title_type=graphic&section=about">
      <button id="back_button" class="ref_button">
        <svg xmlns="http://www.w3.org/2000/svg" class="button_icon" fill="currentColor" class="bi bi-arrow-left-square" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
        </svg>
        <span id="title_name">{{ title.title_name_rus }}</span>
      </button>
    </a>
    <div class="custom_select">
      <select id="chapter_selector" class="ref_button" onchange="location = this.value">
        {% for chapter in all_chapters %}
          {% if not chapter.is_empty %}
            {% if chapter.chapter_number == current_chapter.chapter_number %}
              <option selected value="{% url 'reader:read_graphic' title.id %}?chapter_num={{ chapter.chapter_number }}">{{ chapter }}</option>
            {% else %}
              <option value="{% url 'reader:read_graphic' title.id %}?chapter_num={{ chapter.chapter_number }}">{{ chapter }}</option>
            {% endif %}
          {% endif %}
        {% endfor %}
      </select>
    </div>

    <div class="custom_select">
      <select id="page_selector" class="ref_button" onchange="location = this.value">
        {% for page in all_pages %}
          {% if page.page_number == current_page.page_number %}
            <option selected value="{% url 'reader:read_graphic' title.id %}?chapter_num={{ current_chapter.chapter_number }}&page={{ page.page_number }}">Стр. {{ page.page_number }}</option>
          {% else %}
            <option value="{% url 'reader:read_graphic' title.id %}?chapter_num={{ current_chapter.chapter_number }}&page={{ page.page_number }}">Стр. {{ page.page_number }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>
  </div>
{% endblock %}

{% block content %}
  <div class="container img_container">
    <a id="next_page" href="{% url 'reader:read_graphic' title.id %}?chapter_num={{ current_chapter.chapter_number }}&page={{ current_page.page_number|add:'1' }}"></a>
    <img id="page_image" src="{{ page_image }}" alt="Что-то пошло не так" />
    <a id="previous_page" href="{% url 'reader:read_graphic' title.id %}?chapter_num={{ current_chapter.chapter_number }}&page={{ current_page.page_number|add:'-1' }}"></a>
  </div>
{% endblock %}
